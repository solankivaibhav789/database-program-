DECLARE
CURSOR C1 IS
SELECT * 
FROM CANDIDATE
ORDER BY CATEGORY,PERCENTAGE DESC;
GE CANDIDATE.SEAT_NO%TYPE := 11120000;
SC CANDIDATE.SEAT_NO%TYPE := 11130000;
ST CANDIDATE.SEAT_NO%TYPE := 11140000;
SE CANDIDATE.SEAT_NO%TYPE := 11150000;
PH CANDIDATE.SEAT_NO%TYPE := 11160000;
R1 CANDIDATE%ROWTYPE;
BEGIN
OPEN C1;
LOOP
FETCH C1 INTO R1;
EXIT WHEN(C1%NOTFOUND);

IF(R1.CATEGORY = 'GENERAL') THEN
GE := GE +1;
UPDATE CANDIDATE
SET SEAT_NO = GE
WHERE FORM_NO=R1.FORM_NO;

ELSIF (R1.CATEGORY = 'SC') THEN
SC := SC +1;
UPDATE CANDIDATE
SET SEAT_NO = SC
WHERE FORM_NO=R1.FORM_NO;

ELSIF (R1.CATEGORY = 'ST') THEN
ST := ST +1;
UPDATE CANDIDATE
SET SEAT_NO = ST
WHERE FORM_NO=R1.FORM_NO;

ELSIF (R1.CATEGORY = 'SEBC') THEN
SE := SE +1;
UPDATE CANDIDATE
SET SEAT_NO = SE
WHERE FORM_NO=R1.FORM_NO;

ELSIF (R1.CATEGORY = 'PH') THEN
PH := PH +1;
UPDATE CANDIDATE
SET SEAT_NO = PH
WHERE FORM_NO=R1.FORM_NO;

END IF;
END LOOP;
CLOSE C1;
END;
/